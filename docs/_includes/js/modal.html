<div class="bs-docs-section">
  <h1 id="modals" class="page-header">模态框 <small>modal.js</small><a class='toggle-design-btn'>设计稿 <span class="caret"></span></a></h1>
  <div class="design-source">
    <img src="//demo.alibaba-inc.com/system/vd_assets/assets/000/122/387/06/51/a3/74/e4d166e1dd3d1e3e3e0ce959/original/%E6%B5%AE%E5%B1%82%E6%A0%B7%E5%BC%8F.png?1423017404" alt="对话框" />
  </div>

  <p>模态框经过了优化，更加灵活，以对话框的形式弹出具有最小和最实用的功能集。</p>

  <div class="bs-callout bs-callout-warning" id="callout-stacked-modals">
    <h4>不支持模态框重叠</h4>
    <p>在一个模态框打开的情况下，不要去打开另外一个模态框。如果确实有这种需求，需要定制一些代码对其显示进行控制。</p>
  </div>
  <div class="bs-callout bs-callout-warning" id="callout-modal-markup-placement">
  <h4>模态框的位置标记</h4>
    <p>务必将模态框的HTML代码放置在文档的最高层（即作为body的直接子元素），以避免其他组件影响到模态框的展现/功能。</p>
  </div>
  <div class="bs-callout bs-callout-warning" id="callout-modal-mobile-caveats">
    <h4>关于移动设备的说明</h4>
    <p>这里有一些关于移动设备上使用模态框的附加说明。详情请见：<a href="../getting-started/#support-fixed-position-keyboards">浏览器支持文档</a>。</p>
  </div>

  <p><strong class="text-danger">鉴于HTML5定义的语义，<code>autofocus</code>属性在Bootstrap的模态框中是没有效果的。</strong> 为了取得相同的效果，请使用下述的定制代码：</p>
  {% highlight js %}
  $('#myModal').on('shown', function () {
    $('#myInput').focus()
  })
  {% endhighlight %}

  <h2 id="modals-examples">例子</h2>

  <h3>静态例子</h3>
  <p>一个具有header，body以及包含一系列事件的footer的模态框。</p>
  <div class="bs-example bs-example-modal" data-example-id="static-modal">
    <div class="modal">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <i class="close wsif wsif-close" data-dismiss="modal"></i>
            <h4 class="modal-title">Modal title</h4>
          </div>
          <div class="modal-body">
            <p>One fine body&hellip;</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-lg" data-dismiss="modal">取消</button>
            <button type="button" class="btn btn-primary btn-lg" data-ok="modal">确定</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
  </div><!-- /example -->
{% highlight html %}
<div class="modal fade">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <i class="close wsif wsif-close" data-dismiss="modal"></i>
        <h4 class="modal-title">Modal title</h4>
      </div>
      <div class="modal-body">
        <p>One fine body&hellip;</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-lg" data-dismiss="modal">取消</button>
        <button type="button" class="btn btn-primary btn-lg" data-ok="modal">确定</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
{% endhighlight %}

  <h3>动态例子</h3>
  <p>通过点击下面的按钮可以使用Javascript启动一个模态框。该模态框将会相对于页面自上而下的展示。</p>
  <!-- sample modal content -->
  <div id="myModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">

        <div class="modal-header">
          <i class="close wsif wsif-close" data-dismiss="modal"></i>
          <h4 class="modal-title" id="myModalLabel">Modal title</h4>
        </div>
        <div class="modal-body">
          <h4>Text in a modal</h4>
          <p>Duis mollis, est non commodo luctus, nisi erat porttitor ligula.</p>

          <h4>Popover in a modal</h4>
          <p>This <a href="#" role="button" class="btn popover-test" title="A Title" data-content="And here's some amazing content. It's very engaging. right?">button</a> should trigger a popover on click.</p>

          <h4>Tooltips in a modal</h4>
          <p><a href="#" class="tooltip-test" title="Tooltip">This link</a> and <a href="#" class="tooltip-test" title="Tooltip">that link</a> should have tooltips on hover.</p>

          <hr>

          <h4>Overflowing text to show scroll behavior</h4>
          <p>Cras mattis consectetur purus sit amet fermentum. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.</p>
          <p>Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor.</p>
          <p>Aenean lacinia bibendum nulla sed consectetur. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Donec sed odio dui. Donec ullamcorper nulla non metus auctor fringilla.</p>
          <p>Cras mattis consectetur purus sit amet fermentum. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.</p>
          <p>Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor.</p>
          <p>Aenean lacinia bibendum nulla sed consectetur. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Donec sed odio dui. Donec ullamcorper nulla non metus auctor fringilla.</p>
          <p>Cras mattis consectetur purus sit amet fermentum. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.</p>
          <p>Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor.</p>
          <p>Aenean lacinia bibendum nulla sed consectetur. Praesent commodo cursus magna, vel scelerisque nisl consectetur et. Donec sed odio dui. Donec ullamcorper nulla non metus auctor fringilla.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-lg" data-dismiss="modal">取消</button>
          <button type="button" class="btn btn-primary btn-lg" data-ok="modal">确定</button>
        </div>

      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->

  <div class="bs-example" style="padding-bottom: 24px;">
    <button type="button" class="btn btn-primary " data-toggle="modal" data-target="#myModal">
      Launch demo modal
    </button>
  </div><!-- /example -->
{% highlight html %}
<!-- Button trigger modal -->
<button type="button" class="btn btn-primary " data-toggle="modal" data-target="#myModal">
  Launch demo modal
</button>

<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <i class="close wsif wsif-close" data-dismiss="modal"></i>
        <h4 class="modal-title" id="myModalLabel">Modal title</h4>
      </div>
      <div class="modal-body">
        ...
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-lg" data-dismiss="modal">取消</button>
        <button type="button" class="btn btn-primary btn-lg" data-ok="modal">确定</button>
      </div>
    </div>
  </div>
</div>
{% endhighlight %}

  <div class="bs-callout bs-callout-warning" id="callout-modal-accessibility">
    <h4>增强模态框的可访问性</h4>
    <p>务必为<code>.modal</code>类添加<code>role="dialog"</code>, <code>aria-labelledby="myModalLabel"</code>属性用来指向模态框的标题,并且<code>aria-hidden="true"</code>属性告诉辅助工具略去模态框的DOM元素。</p>
    <p>此外，你可以使用<code>aria-describedby</code>为一个<code>.modal</code>添加一些说明。</p>
  </div>

  <div class="bs-callout bs-callout-info" id="callout-modal-youtube">
    <h4>嵌入YouTube视频</h4>
    <p>在模态框中嵌入YouTube视频需要一些额外的Javascript来控制其自动停止、重放等功能，这些代码Bootstrap中并没有提供。可以参考下面这篇文章。<a href="http://stackoverflow.com/questions/18622508/bootstrap-3-and-youtube-in-modal">Stack Overflow上的文章</a></p>
  </div>

  <h2 id="modals-sizes">可选尺寸</h2>
  <p>模态框有两种尺寸选择，可以通过在<code>.modal-dialog</code>上面指定类名进行配置。</p>
  <div class="bs-example">
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target=".bs-example-modal-lg">Large modal</button>
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target=".bs-example-modal-sm">Small modal</button>
  </div>
{% highlight html %}
<!-- Large modal -->
<button type="button" class="btn btn-primary" data-toggle="modal" data-target=".bs-example-modal-lg">Large modal</button>

<div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      ...
    </div>
  </div>
</div>

<!-- Small modal -->
<button type="button" class="btn btn-primary" data-toggle="modal" data-target=".bs-example-modal-sm">Small modal</button>

<div class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      ...
    </div>
  </div>
</div>
{% endhighlight %}

  <!--  Modal content for the above example -->
  <div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">

        <div class="modal-header">
          <i class="close wsif wsif-close" data-dismiss="modal"></i>
          <h4 class="modal-title" id="myLargeModalLabel">Large modal</h4>
        </div>
        <div class="modal-body">
          ...
        </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->
  <div class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
      <div class="modal-content">

        <div class="modal-header">
         <i class="close wsif wsif-close" data-dismiss="modal"></i>
          <h4 class="modal-title" id="mySmallModalLabel">Small modal</h4>
        </div>
        <div class="modal-body">
          ...
        </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->

  <h2 id="modals-remove-animation">移除过渡效果</h2>
  <p>如果想让模态框直接展示，而不是附带过渡效果，仅需移除模态框的<code>.fade</code>类即可。</p>
{% highlight html %}
<div class="modal" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">
  ...
</div>
{% endhighlight %}

  <h2 id="modals-related-target">基于触发按钮的不同动态展示不同的内容</h2>
  <p>想要实现若干按钮触发同样的模态框，但是现实的内容不一样吗？使用<code>event.relatedTarget</code>以及<a href="https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Using_data_attributes">HTML的<code>data-*</code>属性</a>(也许<a href="http://api.jquery.com/data/">通过jQuery</a>)来具体决定哪个按钮被点击的模态框的内容。可以查看模态框文档的事件部分获得关于<code>relatedTarget</code>的详细内容,</p>
  <div class="bs-example" style="padding-bottom: 24px;">
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" data-whatever="@mdo">Open modal for @mdo</button>
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" data-whatever="@fat">Open modal for @fat</button>
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" data-whatever="@twbootstrap">Open modal for @twbootstrap</button>
    ...more buttons...

    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
           <i class="close wsif wsif-close" data-dismiss="modal"></i>
            <h4 class="modal-title" id="exampleModalLabel">New message</h4>
          </div>
          <div class="modal-body">
            <form>
              <div class="form-group">
                <label for="recipient-name" class="control-label">Recipient:</label>
                <input type="text" class="form-control" id="recipient-name">
              </div>
              <div class="form-group">
                <label for="message-text" class="control-label">Message:</label>
                <textarea class="form-control" id="message-text"></textarea>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-lg" data-dismiss="modal">取消</button>
            <button type="button" class="btn btn-primary btn-lg" data-ok="modal">Send message</button>
          </div>
        </div>
      </div>
    </div><!-- /.modal -->
  </div><!-- /.bs-example -->
{% highlight html %}
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" data-whatever="@mdo">Open modal for @mdo</button>
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" data-whatever="@fat">Open modal for @fat</button>
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" data-whatever="@twbootstrap">Open modal for @twbootstrap</button>
...more buttons...

<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <i class="close wsif wsif-close" data-dismiss="modal"></i>
        <h4 class="modal-title" id="exampleModalLabel">New message</h4>
      </div>
      <div class="modal-body">
        <form>
          <div class="form-group">
            <label for="recipient-name" class="control-label">Recipient:</label>
            <input type="text" class="form-control" id="recipient-name">
          </div>
          <div class="form-group">
            <label for="message-text" class="control-label">Message:</label>
            <textarea class="form-control" id="message-text"></textarea>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-lg" data-dismiss="modal">取消</button>
        <button type="button" class="btn btn-primary btn-lg" data-ok="modal">Send message</button>
      </div>
    </div>
  </div>
</div>
{% endhighlight %}
{% highlight js %}
$('#exampleModal').on('show', function (event) {
  var button = $(event.relatedTarget) // Button that triggered the modal
  var recipient = button.data('whatever') // Extract info from data-* attributes
  // If necessary, you could initiate an AJAX request here (and then do the updating in a callback).
  // Update the modal's content. We'll use jQuery here, but you could use a data binding library or other methods instead.
  var modal = $(this)
  modal.find('.modal-title').text('New message to ' + recipient)
  modal.find('.modal-body input').val(recipient)
})
{% endhighlight %}

  <h2 id="modals-usage">使用</h2>
  <p>通过data属性或者Javascript调用模态框组件可以根据需要动态展示隐藏的内容。模态框展示的时候会为<code>&lt;body&gt;</code>元素添加<code>.modal-open</code>类，该类主要用来重写body的默认滚动行为，并且产生一个<code>.modal-backdrop</code>遮罩层用来提供可点击区域，点击该区域就可以关闭模态框。</p>

  <h3>通过data属性</h3>
  <p>可以不通过Javascript就激活一个模态框。设置一个控制元素（比如一个按钮）的属性如下<code>data-toggle="modal"</code>， <code>data-target="#foo"</code>或者<code>href="#foo"</code> 用以指向一个特定的模态框。</p>
{% highlight html %}
<button type="button" data-toggle="modal" data-target="#myModal">Launch modal</button>
{% endhighlight %}

  <h3>通过JavaScript</h3>
  <p>可以通过一行代码激活一个有<code>myModal</code>id属性的模态框：</p>
  <p>可以通过一行代码激活一个有id属性的模态框Call a modal with id <code>myModal</code> with a single line of JavaScript:</p>
  {% highlight js %}$('#myModal').modal(options){% endhighlight %}

  <h3 id="modals-options">选项</h3>
  <p>可以通过配置data属性或者使用Javascript来配置模态框的选项。对于data属性，需要将属性名放在<code>data-</code>之后，比如<code>data-backdrop=""</code>。</p>
  <div class="table-responsive">
    <pre><code>
   /* 弹层静态方法，用于很少重复，不需记住状态的弹层，可方便的直接调用，最简单形式就是$.alert('我是alert') 或$.confirm('我是confirm') 或 $.confirm(options)
   * 若弹层内容是复杂的Dom结构， 建议将弹层html结构写到模版里，用$(xx).modal(options) 或无js的方式调用
   *
   * example
   * 以下参数均可以data-xx 的形式在无js调用模式里配置在html模板.modal元素的data属性里(有些属性如okbtn cancelbtn没必要这么用，直接改html模板就行了)
   * $.alert({
   *  title: '自定义标题'
   *  body: 'html' // 必填
   *  okbtn : '好的'
   *  cancelbtn : '雅达'
   *  closebtn: true
   *  keyboard: true   是否可由esc按键关闭
   *  backdrop: true   决定是否为模态对话框添加一个背景遮罩层。另外，该属性指定'static'时，表示添加遮罩层，同时点击模态对话框的外部区域不会将其关闭。
   *  bgcolor : '#123456'  背景遮罩层颜色
   *  width: {number|string(px)|'small'|'normal'|'large'}推荐优先使用后三个描述性字符串，统一样式
   *  timeout: {number} 1000    单位毫秒ms ,dialog打开后多久自动关闭
   *  transition: {Boolean} 是否以动画弹出对话框，默认为true。HTML使用方式只需把模板里的fade的class去掉即可
   *  hasfoot: {Boolean}  是否显示脚部  默认true
   *  remote: {string} 如果提供了远程url地址，就会加载远端内容,之后触发loaded事件
   *  show:     fn --------------function(e) {}
   *  shown:    fn
   *  hide:     fn
   *  hidden:   fn
   *  okHide:   function(e) {alert('点击确认后、dialog消失前的逻辑,
   *            函数返回true（默认）则dialog关闭，反之不关闭;若不传入则默认是直接返回true的函数
   *            注意不要人肉返回undefined！！')}
   *  okHidden: function(e) {alert('点击确认后、dialog消失后的逻辑')}
   *  cancelHide: fn
   *  cancelHidden: fn
   * })
   *
   */
    </code></pre>

  </div><!-- /.table-responsive -->

  <h3 id="modals-methods">方法</h3>

  <h4>.modal(options)</h4>
  <p>将页面中的某块内容作为模态框激活，该方法接受一个可选参数<code>object</code>。</p>
{% highlight js %}
$('#myModal').modal({
  keyboard: false
})
{% endhighlight %}

  <h4>.modal('toggle')</h4>
  <p>手动打开或者关闭一个模态框。<strong>在模态框显示或隐藏之前返回到主调函数中</strong> (即在<code>shown</code>或者<code>hidden</code>事件被触发之前)。</p>
  {% highlight js %}$('#myModal').modal('toggle'){% endhighlight %}

  <h4>.modal('show')</h4>
  <p>手动打开一个模态框。<strong>在模态框显示之前返回到主调函数中</strong> (比如在<code>shown</code>事件之前).</p>
  {% highlight js %}$('#myModal').modal('show'){% endhighlight %}

  <h4>.modal('hide')</h4>
  <p>手动隐藏一个模态框。<strong>在模态框隐藏之前返回到主调函数中</strong> (比如在<code>hidden</code>事件之前).</p>
  {% highlight js %}$('#myModal').modal('hide'){% endhighlight %}

  <h4>.modal('okHide')</h4>
  <p>手动关闭弹层并触发okHide逻辑. <strong>在模态框隐藏之前返回主调函数中</strong> (比如在<code>hidden</code>事件之前触发).</p>
  {% highlight js %}$('#myModal').modal('okHide'){% endhighlight %}

  <h4>.modal('handleUpdate')</h4>
  <p>执行一次自适应。用于弹层高度发生变化时。(当浏览器窗口resize时会自动自适应)</p>
  {% highlight js %}$('#myModal').modal('handleUpdate'){% endhighlight %}

  <h3 id="modals-events">事件</h3>
  <p>Bootstrap模态框类提供了一些事件用于监听并执行你自己的代码。</p>
  <div class="table-responsive">
    <table class="table table-bordered table-striped bs-events-table">
      <thead>
       <tr>
         <th style="width: 150px;">事件类型</th>
         <th>描述</th>
       </tr>
      </thead>
      <tbody>
       <tr>
         <td>show</td>
         <td>该事件在 <code>show</code> 方法调用之后立即被触发。如果该事件由点击事件触发，则回调函数中可以通过事件的<code>relatedTarget</code> 属性访问该元素。</td>
       </tr>
       <tr>
         <td>shown</td>
         <td>该事件在模态框展示出来之后被触发（或者在CSS过渡效果完毕之后）。如果该事件由点击事件触发，则回调函数中可以通过事件的<code>relatedTarget</code> 属性访问该元素。</td>
       </tr>
       <tr>
         <td>hide</td>
         <td>该事件在 <code>hide</code> 方法调用之后立即被触发。</td>
       </tr>
       <tr>
         <td>hidden</td>
         <td>该事件在模态框完全关闭之后（或者CSS过渡效果完成之后）被触发。</td>
       </tr>
       <tr>
         <td>okHide</td>
         <td>该事件在<code>hide</code>方法被调用之后触发。其他不变，响应的是点击了“确认”按钮时执行的回调，返回false可阻止弹层关闭</td>
       </tr>
       <tr>
         <td>okHidden</td>
         <td>该事件在模态框完全关闭之后（或者CSS过渡效果完成之后）被触发。点击“确认”按钮后弹层已经关闭后的回调</td>
       </tr>
       <tr>
         <td>okHide</td>
         <td>该事件在 <code>hide</code> 方法调用之后立即被触发。其他不变，不过是点击了除“确认”按钮外其他原因导致弹层关闭时执行的回调</td>
       </tr>
       <tr>
         <td>okHidden</td>
         <td>该事件在模态框完全关闭之后（或者CSS过渡效果完成之后）被触发。点击了除“确认”按钮外其他原因导致弹层关闭完毕后执行的回调</td>
       </tr>
       <tr>
         <td>loaded</td>
         <td><code>new</code> 从配置属性中的<code>option</code>指定的远程数据源加载数据完毕之后触发该事件。</td>
       </tr>
      </tbody>
    </table>
  </div><!-- /.table-responsive -->
{% highlight js %}
$('#myModal').on('hidden', function (e) {
  // do something...
})
{% endhighlight %}

  <h3 id="modals-shortcat">快捷方式</h3>
  <p>我们为常用的两种对话框 <code>$.alert</code> 和 <code>$.confirm</code>建立了快捷方式。使用方式如下所示:</p>
{% highlight js %}
//弹出一条消息
$.alert("消息内容");  

//弹出一条消息并设置回调
$.alert("这里消息内容", function() {
  //关闭alert的回调
});

//弹出一条消息，同时设置了消息标题，消息内容，和回调函数
$.alert("消息标题", "这是消息内容", function() {
  //关闭alert的回调
});

//显示一个确认框
$.confirm("这是消息内容", function() {
  //这里是点击确定按钮的回调
  }, function() {
  //这里是点击取消按钮的回调
  });

$.confirm("消息标题", "这是消息内容", function() {
  //这里是点击确定按钮的回调
  }, function() {
  //这里是点击取消按钮的回调
  });
{% endhighlight %}
</div>
